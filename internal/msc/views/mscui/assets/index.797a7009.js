import{_ as C,Q as y,u as x,R as w,K as D,S as k,r as E,o as _,l as S,d as t,w as s,m as B,c as T,P as j,F as O,e as p,f as V,U as N,V as P}from"./index.d39b14b4.js";/* empty css                  *//* empty css                *//* empty css                        *//* empty css                      */import z from"./save.ca568b49.js";/* empty css                  */const A={name:"tableSetting",components:{saveDialog:z},data(){return{dialog:{save:!1},apiObj:this.$API.system.table.list,selection:[]}},mounted(){},methods:{add(){this.dialog.save=!0,this.$nextTick(()=>{this.$refs.saveDialog.open()})},table_edit(e){this.dialog.save=!0,this.$nextTick(()=>{this.$refs.saveDialog.open("edit").setData(e)})},async table_del(e,a){var n={id:e.id},o=await this.$API.demo.post.post(n);o.code==200?(this.$refs.table.tableData.splice(a,1),this.$message.success("\u5220\u9664\u6210\u529F")):this.$alert(o.message,"\u63D0\u793A",{type:"error"})},async batch_del(){this.$confirm(`\u786E\u5B9A\u5220\u9664\u9009\u4E2D\u7684 ${this.selection.length} \u9879\u5417\uFF1F`,"\u63D0\u793A",{type:"warning"}).then(()=>{const e=this.$loading();this.selection.forEach(a=>{this.$refs.table.tableData.forEach((n,o)=>{a.id===n.id&&this.$refs.table.tableData.splice(o,1)})}),e.close(),this.$message.success("\u64CD\u4F5C\u6210\u529F")}).catch(()=>{})},selectionChange(e){this.selection=e},handleSuccess(e,a){a=="add"?(e.id=new Date().getTime(),this.$refs.table.tableData.unshift(e)):a=="edit"&&this.$refs.table.tableData.filter(n=>n.id===e.id).forEach(n=>{Object.assign(n,e)})}}},F={class:"left-panel"},I=p("\u7F16\u8F91"),q=p("\u5220\u9664");function G(e,a,n,o,r,l){const d=V,m=y,c=x,h=w,f=N,u=P,g=D,b=k,v=E("save-dialog");return _(),S(O,null,[t(b,null,{default:s(()=>[t(m,null,{default:s(()=>[B("div",F,[t(d,{type:"primary",icon:"el-icon-plus",onClick:l.add},null,8,["onClick"])])]),_:1}),t(g,{class:"nopadding"},{default:s(()=>[t(u,{ref:"table",apiObj:r.apiObj,"row-key":"id",onSelectionChange:l.selectionChange,stripe:""},{default:s(()=>[t(c,{type:"selection",width:"50"}),t(c,{label:"\u6807\u8BC6",prop:"code",width:"150"}),t(c,{label:"\u8868\u683C\u540D\u79F0",prop:"name",width:"250"}),t(c,{label:"\u64CD\u4F5C",fixed:"right",align:"right",width:"120"},{default:s(i=>[t(f,null,{default:s(()=>[t(d,{text:"",type:"primary",size:"small",onClick:$=>l.table_edit(i.row,i.$index)},{default:s(()=>[I]),_:2},1032,["onClick"]),t(h,{title:"\u786E\u5B9A\u5220\u9664\u5417\uFF1F",onConfirm:$=>l.table_del(i.row,i.$index)},{reference:s(()=>[t(d,{text:"",type:"primary",size:"small"},{default:s(()=>[q]),_:1})]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:1})]),_:1},8,["apiObj","onSelectionChange"])]),_:1})]),_:1}),r.dialog.save?(_(),T(v,{key:0,ref:"saveDialog",onSuccess:l.handleSuccess,onClosed:a[0]||(a[0]=i=>r.dialog.save=!1)},null,8,["onSuccess"])):j("",!0)],64)}const L=C(A,[["render",G]]);export{L as default};
