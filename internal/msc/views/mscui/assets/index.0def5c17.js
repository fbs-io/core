import{_ as z,v as H,R as U,C as A,I as F,J as M,K as P,r as w,a8 as R,o as i,l as x,d as e,w as t,F as y,n as j,c as _,P as m,ah as q,A as J,m as l,t as h,q as K,s as L,e as d,f as O,g as G,h as Q,i as W}from"./index.d39b14b4.js";/* empty css                  *//* empty css                *//* empty css                *//* empty css                        *//* empty css                         *//* empty css                      */import X from"./save.37fa6af7.js";import Y from"./logs.d8b16275.js";/* empty css                    *//* empty css                  */const Z={name:"task",components:{saveDialog:X,logs:Y},provide(){return{list:this.list}},data(){return{dialog:{save:!1,logsVisible:!1},list:[{id:"1",title:"\u6E05\u7406\u670D\u52A1\u5668\u7F13\u5B58",handler:"cleanUpCacheHandler",cron:"59 59 23 * * ? *",state:"1"},{id:"2",title:"\u81EA\u52A8\u5BA1\u6838",handler:"automaticAuditHandler",cron:"0 0 * * * ? *",state:"1"},{id:"3",title:"\u6E05\u7406\u672A\u5B9E\u540D\u7528\u6237",handler:"deleteUserHandler",cron:"0 0 0 * * ? *",state:"-1"}]}},mounted(){},methods:{add(){this.dialog.save=!0,this.$nextTick(()=>{this.$refs.saveDialog.open()})},edit(o){this.dialog.save=!0,this.$nextTick(()=>{this.$refs.saveDialog.open("edit").setData(o)})},del(o){this.$confirm(`\u786E\u8BA4\u5220\u9664 ${o.title} \u8BA1\u5212\u4EFB\u52A1\u5417\uFF1F`,"\u63D0\u793A",{type:"warning",confirmButtonText:"\u5220\u9664",confirmButtonClass:"el-button--danger"}).then(()=>{this.list.splice(this.list.findIndex(n=>n.id===o.id),1)}).catch(()=>{})},logs(){this.dialog.logsVisible=!0},run(o){this.$message.success(`\u5DF2\u6210\u529F\u6267\u884C\u8BA1\u5212\u4EFB\u52A1\uFF1A${o.title}`)},handleSuccess(o,n){n=="add"?(o.id=new Date().getTime(),this.list.push(o)):n=="edit"&&this.list.filter(r=>r.id===o.id).forEach(r=>{Object.assign(r,o)})}}},f=o=>(K("data-v-aa4e25cb"),o=o(),L(),o),ee=f(()=>l("h4",null,"\u6267\u884C\u7C7B",-1)),te=f(()=>l("h4",null,"\u5B9A\u65F6\u89C4\u5219",-1)),oe={class:"bottom"},se={class:"state"},le=d("\u51C6\u5907\u5C31\u7EEA"),ne=d("\u505C\u7528"),ae={class:"handler"},ie=d("\u7F16\u8F91"),ce=d("\u65E5\u5FD7"),de=d("\u5220\u9664"),re=f(()=>l("p",null,"\u6DFB\u52A0\u8BA1\u5212\u4EFB\u52A1",-1));function _e(o,n,r,ue,c,a){const g=H,v=O,E=U,u=G,b=Q,D=W,k=A,C=F,V=q,I=J,S=M,B=P,T=w("save-dialog"),$=w("logs"),N=R;return i(),x(y,null,[e(B,null,{default:t(()=>[e(S,{gutter:15},{default:t(()=>[(i(!0),x(y,null,j(c.list,s=>(i(),_(C,{xl:6,lg:6,md:8,sm:12,xs:24,key:s.id},{default:t(()=>[e(k,{class:"task task-item",shadow:"hover"},{default:t(()=>[l("h2",null,h(s.title),1),l("ul",null,[l("li",null,[ee,l("p",null,h(s.handler),1)]),l("li",null,[te,l("p",null,h(s.cron),1)])]),l("div",oe,[l("div",se,[s.state=="1"?(i(),_(g,{key:0,size:"small"},{default:t(()=>[le]),_:1})):m("",!0),s.state=="-1"?(i(),_(g,{key:1,size:"small",type:"info"},{default:t(()=>[ne]),_:1})):m("",!0)]),l("div",ae,[e(E,{title:"\u786E\u5B9A\u7ACB\u5373\u6267\u884C\u5417\uFF1F",onConfirm:p=>a.run(s)},{reference:t(()=>[e(v,{type:"primary",icon:"el-icon-caret-right",circle:""})]),_:2},1032,["onConfirm"]),e(D,{trigger:"click"},{dropdown:t(()=>[e(b,null,{default:t(()=>[e(u,{onClick:p=>a.edit(s)},{default:t(()=>[ie]),_:2},1032,["onClick"]),e(u,{onClick:p=>a.logs(s)},{default:t(()=>[ce]),_:2},1032,["onClick"]),e(u,{onClick:p=>a.del(s),divided:""},{default:t(()=>[de]),_:2},1032,["onClick"])]),_:2},1024)]),default:t(()=>[e(v,{type:"primary",icon:"el-icon-more",circle:"",plain:""})]),_:2},1024)])])]),_:2},1024)]),_:2},1024))),128)),e(C,{xl:6,lg:6,md:8,sm:12,xs:24},{default:t(()=>[e(k,{class:"task task-add",shadow:"never",onClick:a.add},{default:t(()=>[e(I,null,{default:t(()=>[e(V)]),_:1}),re]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),c.dialog.save?(i(),_(T,{key:0,ref:"saveDialog",onSuccess:a.handleSuccess,onClosed:n[0]||(n[0]=s=>c.dialog.save=!1)},null,8,["onSuccess"])):m("",!0),e(N,{title:"\u8BA1\u5212\u4EFB\u52A1\u65E5\u5FD7",modelValue:c.dialog.logsVisible,"onUpdate:modelValue":n[1]||(n[1]=s=>c.dialog.logsVisible=s),size:600,direction:"rtl","destroy-on-close":""},{default:t(()=>[e($)]),_:1},8,["modelValue"])],64)}const Ee=z(Z,[["render",_e],["__scopeId","data-v-aa4e25cb"]]);export{Ee as default};
