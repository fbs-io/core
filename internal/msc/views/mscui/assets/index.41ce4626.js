import{_ as $,Q as k,u as x,R as D,K as E,S,r as T,o as _,l as B,d as e,w as l,m as j,c as I,P as N,F as O,e as p,f as V,T as A,A as P,U as z,V as F}from"./index.d39b14b4.js";/* empty css                  *//* empty css                *//* empty css                        *//* empty css                      */import q from"./save.e867dfef.js";const G={name:"client",components:{saveDialog:q},data(){return{dialog:{save:!1},apiObj:this.$API.system.app.list,selection:[]}},methods:{add(){this.dialog.save=!0,this.$nextTick(()=>{this.$refs.saveDialog.open()})},table_edit(t){this.dialog.save=!0,this.$nextTick(()=>{this.$refs.saveDialog.open("edit").setData(t)})},async table_del(t,a){var s={id:t.id},i=await this.$API.user.del.post(s);i.code==200?(this.$refs.table.tableData.splice(a,1),this.$message.success("\u5220\u9664\u6210\u529F")):this.$alert(i.message,"\u63D0\u793A",{type:"error"})},async batch_del(){this.$confirm(`\u786E\u5B9A\u5220\u9664\u9009\u4E2D\u7684 ${this.selection.length} \u9879\u5417\uFF1F`,"\u63D0\u793A",{type:"warning"}).then(()=>{const t=this.$loading();this.selection.forEach(a=>{this.$refs.table.tableData.forEach((s,i)=>{a.id===s.id&&this.$refs.table.tableData.splice(i,1)})}),t.close(),this.$message.success("\u64CD\u4F5C\u6210\u529F")}).catch(()=>{})},selectionChange(t){this.selection=t},handleSuccess(t,a){a=="add"?(t.id=new Date().getTime(),this.$refs.table.tableData.unshift(t)):a=="edit"&&this.$refs.table.tableData.filter(s=>s.id===t.id).forEach(s=>{Object.assign(s,t)})}}},H={class:"left-panel"},K=p("\u7F16\u8F91"),M=p("\u5220\u9664");function Q(t,a,s,i,r,o){const d=V,h=k,n=x,f=A,m=P,u=D,b=z,g=F,v=E,C=S,w=T("save-dialog");return _(),B(O,null,[e(C,null,{default:l(()=>[e(h,null,{default:l(()=>[j("div",H,[e(d,{type:"primary",icon:"el-icon-plus",onClick:o.add},null,8,["onClick"]),e(d,{type:"danger",plain:"",icon:"el-icon-delete",disabled:r.selection.length==0,onClick:o.batch_del},null,8,["disabled","onClick"])])]),_:1}),e(v,{class:"nopadding"},{default:l(()=>[e(g,{ref:"table",apiObj:r.apiObj,"row-key":"id",onSelectionChange:o.selectionChange,stripe:""},{default:l(()=>[e(n,{type:"selection",width:"50"}),e(n,{label:"\u5E94\u7528ID",prop:"appId",width:"150"}),e(n,{label:"\u5E94\u7528\u540D\u79F0",prop:"appName",width:"250"}),e(n,{label:"\u72B6\u6001",width:"50"},{default:l(()=>[e(m,{style:{color:"#67C23A"}},{default:l(()=>[e(f)]),_:1})]),_:1}),e(n,{label:"\u79D8\u94A5",prop:"secret","show-overflow-tooltip":"",width:"150"}),e(n,{label:"\u6388\u6743\u5230\u671F",prop:"exp",width:"150"}),e(n,{label:"\u64CD\u4F5C",fixed:"right",align:"right",width:"120"},{default:l(c=>[e(b,null,{default:l(()=>[e(d,{text:"",type:"primary",size:"small",onClick:y=>o.table_edit(c.row,c.$index)},{default:l(()=>[K]),_:2},1032,["onClick"]),e(u,{title:"\u786E\u5B9A\u5220\u9664\u5417\uFF1F",onConfirm:y=>o.table_del(c.row,c.$index)},{reference:l(()=>[e(d,{text:"",type:"primary",size:"small"},{default:l(()=>[M]),_:1})]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:1})]),_:1},8,["apiObj","onSelectionChange"])]),_:1})]),_:1}),r.dialog.save?(_(),I(w,{key:0,ref:"saveDialog",onSuccess:o.handleSuccess,onClosed:a[0]||(a[0]=c=>r.dialog.save=!1)},null,8,["onSuccess"])):N("",!0)],64)}const Y=$(G,[["render",Q]]);export{Y as default};
