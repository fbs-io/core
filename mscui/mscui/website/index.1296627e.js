import{_ as U,O as z,a2 as H,U as M,j,Y as F,b as L,k as w,ai as O,o as i,c as x,f as e,w as t,J as y,K as q,e as _,C as m,ar as A,S as G,g as s,t as f,L as J,M as K,l as d,q as P,D as R,F as Y,G as Q}from"./index.24f9f7c9.js";/* empty css                  *//* empty css                *//* empty css                *//* empty css                        *//* empty css                         *//* empty css                      */import W from"./save.1cc7837f.js";import X from"./logs.407a7629.js";/* empty css                    *//* empty css                  */const Z={name:"task",components:{saveDialog:W,logs:X},provide(){return{list:this.list}},data(){return{dialog:{save:!1,logsVisible:!1},list:[{id:"1",title:"\u6E05\u7406\u670D\u52A1\u5668\u7F13\u5B58",handler:"cleanUpCacheHandler",cron:"59 59 23 * * ? *",state:"1"},{id:"2",title:"\u81EA\u52A8\u5BA1\u6838",handler:"automaticAuditHandler",cron:"0 0 * * * ? *",state:"1"},{id:"3",title:"\u6E05\u7406\u672A\u5B9E\u540D\u7528\u6237",handler:"deleteUserHandler",cron:"0 0 0 * * ? *",state:"-1"}]}},mounted(){},methods:{add(){this.dialog.save=!0,this.$nextTick(()=>{this.$refs.saveDialog.open()})},edit(o){this.dialog.save=!0,this.$nextTick(()=>{this.$refs.saveDialog.open("edit").setData(o)})},del(o){this.$confirm(`\u786E\u8BA4\u5220\u9664 ${o.title} \u8BA1\u5212\u4EFB\u52A1\u5417\uFF1F`,"\u63D0\u793A",{type:"warning",confirmButtonText:"\u5220\u9664",confirmButtonClass:"el-button--danger"}).then(()=>{this.list.splice(this.list.findIndex(n=>n.id===o.id),1)}).catch(()=>{})},logs(){this.dialog.logsVisible=!0},run(o){this.$message.success(`\u5DF2\u6210\u529F\u6267\u884C\u8BA1\u5212\u4EFB\u52A1\uFF1A${o.title}`)},handleSuccess(o,n){n=="add"?(o.id=new Date().getTime(),this.list.push(o)):n=="edit"&&this.list.filter(r=>r.id===o.id).forEach(r=>{Object.assign(r,o)})}}},h=o=>(J("data-v-aa4e25cb"),o=o(),K(),o),ee=h(()=>s("h4",null,"\u6267\u884C\u7C7B",-1)),te=h(()=>s("h4",null,"\u5B9A\u65F6\u89C4\u5219",-1)),oe={class:"bottom"},le={class:"state"},se=d("\u51C6\u5907\u5C31\u7EEA"),ne=d("\u505C\u7528"),ae={class:"handler"},ie=d("\u7F16\u8F91"),ce=d("\u65E5\u5FD7"),de=d("\u5220\u9664"),re=h(()=>s("p",null,"\u6DFB\u52A0\u8BA1\u5212\u4EFB\u52A1",-1));function _e(o,n,r,ue,c,a){const g=z,v=P,E=H,u=R,b=Y,D=Q,k=M,C=j,V=A,S=G,B=F,I=L,T=w("save-dialog"),$=w("logs"),N=O;return i(),x(y,null,[e(I,null,{default:t(()=>[e(B,{gutter:15},{default:t(()=>[(i(!0),x(y,null,q(c.list,l=>(i(),_(C,{xl:6,lg:6,md:8,sm:12,xs:24,key:l.id},{default:t(()=>[e(k,{class:"task task-item",shadow:"hover"},{default:t(()=>[s("h2",null,f(l.title),1),s("ul",null,[s("li",null,[ee,s("p",null,f(l.handler),1)]),s("li",null,[te,s("p",null,f(l.cron),1)])]),s("div",oe,[s("div",le,[l.state=="1"?(i(),_(g,{key:0,size:"small"},{default:t(()=>[se]),_:1})):m("",!0),l.state=="-1"?(i(),_(g,{key:1,size:"small",type:"info"},{default:t(()=>[ne]),_:1})):m("",!0)]),s("div",ae,[e(E,{title:"\u786E\u5B9A\u7ACB\u5373\u6267\u884C\u5417\uFF1F",onConfirm:p=>a.run(l)},{reference:t(()=>[e(v,{type:"primary",icon:"el-icon-caret-right",circle:""})]),_:2},1032,["onConfirm"]),e(D,{trigger:"click"},{dropdown:t(()=>[e(b,null,{default:t(()=>[e(u,{onClick:p=>a.edit(l)},{default:t(()=>[ie]),_:2},1032,["onClick"]),e(u,{onClick:p=>a.logs(l)},{default:t(()=>[ce]),_:2},1032,["onClick"]),e(u,{onClick:p=>a.del(l),divided:""},{default:t(()=>[de]),_:2},1032,["onClick"])]),_:2},1024)]),default:t(()=>[e(v,{type:"primary",icon:"el-icon-more",circle:"",plain:""})]),_:2},1024)])])]),_:2},1024)]),_:2},1024))),128)),e(C,{xl:6,lg:6,md:8,sm:12,xs:24},{default:t(()=>[e(k,{class:"task task-add",shadow:"never",onClick:a.add},{default:t(()=>[e(S,null,{default:t(()=>[e(V)]),_:1}),re]),_:1},8,["onClick"])]),_:1})]),_:1})]),_:1}),c.dialog.save?(i(),_(T,{key:0,ref:"saveDialog",onSuccess:a.handleSuccess,onClosed:n[0]||(n[0]=l=>c.dialog.save=!1)},null,8,["onSuccess"])):m("",!0),e(N,{title:"\u8BA1\u5212\u4EFB\u52A1\u65E5\u5FD7",modelValue:c.dialog.logsVisible,"onUpdate:modelValue":n[1]||(n[1]=l=>c.dialog.logsVisible=l),size:600,direction:"rtl","destroy-on-close":""},{default:t(()=>[e($)]),_:1},8,["modelValue"])],64)}const Ee=U(Z,[["render",_e],["__scopeId","data-v-aa4e25cb"]]);export{Ee as default};
