import{_ as S,E as V,N as T,ab as B,a2 as N,b as j,d as O,k as m,o as p,c as z,f as e,w as i,g as _,e as f,C as g,J as I,l as h,q as P,m as U,a4 as q,a5 as A}from"./index.fb9fcfd7.js";/* empty css                  *//* empty css                *//* empty css                        *//* empty css                      */import F from"./save.dafd747a.js";import G from"./permission.db475182.js";/* empty css                    *//* empty css                */const H={name:"role",components:{saveDialog:F,permissionDialog:G},data(){return{dialog:{save:!1,permission:!1},apiObj:this.$API.system.role.list,selection:[],search:{keyword:null}}},methods:{add(){this.dialog.save=!0,this.$nextTick(()=>{this.$refs.saveDialog.open()})},table_edit(s){this.dialog.save=!0,this.$nextTick(()=>{this.$refs.saveDialog.open("edit").setData(s)})},table_show(s){this.dialog.save=!0,this.$nextTick(()=>{this.$refs.saveDialog.open("show").setData(s)})},permission(){this.dialog.permission=!0,this.$nextTick(()=>{this.$refs.permissionDialog.open()})},async table_del(s){var t={id:s.id},c=await this.$API.demo.post.post(t);c.code==200?(this.$refs.table.refresh(),this.$message.success("\u5220\u9664\u6210\u529F")):this.$alert(c.message,"\u63D0\u793A",{type:"error"})},async batch_del(){this.$confirm(`\u786E\u5B9A\u5220\u9664\u9009\u4E2D\u7684 ${this.selection.length} \u9879\u5417\uFF1F\u5982\u679C\u5220\u9664\u9879\u4E2D\u542B\u6709\u5B50\u96C6\u5C06\u4F1A\u88AB\u4E00\u5E76\u5220\u9664`,"\u63D0\u793A",{type:"warning"}).then(()=>{const s=this.$loading();this.$refs.table.refresh(),s.close(),this.$message.success("\u64CD\u4F5C\u6210\u529F")}).catch(()=>{})},selectionChange(s){this.selection=s},changeSwitch(s,t){t.status=t.status=="1"?"0":"1",t.$switch_status=!0,setTimeout(()=>{delete t.$switch_status,t.status=s,this.$message.success("\u64CD\u4F5C\u6210\u529F")},500)},upsearch(){},filterTree(s){var t=null;function c(u){u.forEach(a=>{a.id==s&&(t=a),a.children&&c(a.children)})}return c(this.$refs.table.tableData),t},handleSaveSuccess(s,t){t=="add"?this.$refs.table.refresh():t=="edit"&&this.$refs.table.refresh()}}},J={class:"left-panel"},M=h("\u6743\u9650\u8BBE\u7F6E"),K={class:"right-panel"},L={class:"right-panel-search"},Q=h("\u67E5\u770B"),R=h("\u7F16\u8F91"),W=h("\u5220\u9664");function X(s,t,c,u,a,n){const r=P,b=U,v=V,o=T,w=B,C=N,k=q,y=A,x=j,$=O,D=m("save-dialog"),E=m("permission-dialog");return p(),z(I,null,[e($,null,{default:i(()=>[e(v,null,{default:i(()=>[_("div",J,[e(r,{type:"primary",icon:"el-icon-plus",onClick:n.add},null,8,["onClick"]),e(r,{type:"danger",plain:"",icon:"el-icon-delete",disabled:a.selection.length==0,onClick:n.batch_del},null,8,["disabled","onClick"]),e(r,{type:"primary",plain:"",disabled:a.selection.length!=1,onClick:n.permission},{default:i(()=>[M]),_:1},8,["disabled","onClick"])]),_("div",K,[_("div",L,[e(b,{modelValue:a.search.keyword,"onUpdate:modelValue":t[0]||(t[0]=l=>a.search.keyword=l),placeholder:"\u89D2\u8272\u540D\u79F0",clearable:""},null,8,["modelValue"]),e(r,{type:"primary",icon:"el-icon-search",onClick:n.upsearch},null,8,["onClick"])])])]),_:1}),e(x,{class:"nopadding"},{default:i(()=>[e(y,{ref:"table",apiObj:a.apiObj,"row-key":"id",onSelectionChange:n.selectionChange,stripe:""},{default:i(()=>[e(o,{type:"selection",width:"50"}),e(o,{label:"#",type:"index",width:"50"}),e(o,{label:"\u89D2\u8272\u540D\u79F0",prop:"label",width:"150"}),e(o,{label:"\u522B\u540D",prop:"alias",width:"200"}),e(o,{label:"\u6392\u5E8F",prop:"sort",width:"80"}),e(o,{label:"\u72B6\u6001",prop:"status",width:"80"},{default:i(l=>[e(w,{modelValue:l.row.status,"onUpdate:modelValue":d=>l.row.status=d,onChange:d=>n.changeSwitch(d,l.row),loading:l.row.$switch_status,"active-value":"1","inactive-value":"0"},null,8,["modelValue","onUpdate:modelValue","onChange","loading"])]),_:1}),e(o,{label:"\u521B\u5EFA\u65F6\u95F4",prop:"date",width:"180"}),e(o,{label:"\u5907\u6CE8",prop:"remark","min-width":"150"}),e(o,{label:"\u64CD\u4F5C",fixed:"right",align:"right",width:"170"},{default:i(l=>[e(k,null,{default:i(()=>[e(r,{text:"",type:"primary",size:"small",onClick:d=>n.table_show(l.row,l.$index)},{default:i(()=>[Q]),_:2},1032,["onClick"]),e(r,{text:"",type:"primary",size:"small",onClick:d=>n.table_edit(l.row,l.$index)},{default:i(()=>[R]),_:2},1032,["onClick"]),e(C,{title:"\u786E\u5B9A\u5220\u9664\u5417\uFF1F",onConfirm:d=>n.table_del(l.row,l.$index)},{reference:i(()=>[e(r,{text:"",type:"primary",size:"small"},{default:i(()=>[W]),_:1})]),_:2},1032,["onConfirm"])]),_:2},1024)]),_:1})]),_:1},8,["apiObj","onSelectionChange"])]),_:1})]),_:1}),a.dialog.save?(p(),f(D,{key:0,ref:"saveDialog",onSuccess:n.handleSaveSuccess,onClosed:t[1]||(t[1]=l=>a.dialog.save=!1)},null,8,["onSuccess"])):g("",!0),a.dialog.permission?(p(),f(E,{key:1,ref:"permissionDialog",onClosed:t[2]||(t[2]=l=>a.dialog.permission=!1)},null,512)):g("",!0)],64)}const oe=S(H,[["render",X]]);export{oe as default};
