import{_ as A,o as r,c as C,g as h,u as D,v as F,x as P,m as N,n as I,s as W,p as L,y as z,z as R,q as G,A as M,k,B as T,e as n,w as t,f as l,C as p,t as O,l as m}from"./index.fb9fcfd7.js";import Z from"./commonPage.e3fbd47a.js";import j from"./agree.dbf89da7.js";/* empty css                  *//* empty css                */const H={props:{modelValue:{type:String,default:""}},data(){return{level:0}},watch:{modelValue(){this.strength(this.modelValue)}},mounted(){this.strength(this.modelValue)},methods:{strength(i){var o=0,a=i.length>=6,w=/\d/.test(i),e=/[a-z]/.test(i),f=/[A-Z]/.test(i),c=!/(\w)\1{2}/.test(i),V=/[`~!@#$%^&*()_+<>?:"{},./;'[\]]/.test(i);if(i.length<=0)return o=0,this.level=o,!1;if(!a)return o=1,this.level=o,!1;w&&(o+=1),e&&(o+=1),f&&(o+=1),c&&(o+=1),V&&(o+=1),this.level=o}}},J={class:"sc-password-strength"};function K(i,o,a,w,e,f){return r(),C("div",J,[h("div",{class:D(["sc-password-strength-bar",`sc-password-strength-level-${e.level}`])},null,2)])}const S=A(H,[["render",K],["__scopeId","data-v-30243a49"]]);const Q={components:{commonPage:Z,agreePage:j,scPasswordStrength:S},data(){return{stepActive:0,showAgree:!1,isloading:!1,isShowDB:!1,isShowCache:!1,showWarning:!1,db_cache:"Sqlite\u6570\u636E\u5E93",form:{port:"80",user:"root",password:"root123",password2:"root123",agree:!1,db_name:"",db_host:"",db_port:"",db_user:"",db_pwd:"",db_type:"sqlite",cache_name:"",cache_host:"",cache_port:"",cache_user:"",cache_pwd:"",cache_type:"local",data_path:"data"},rules:{user:[{required:!0,message:"\u8BF7\u8F93\u5165\u8D26\u53F7\u540D"}],password:[{required:!0,message:"\u8BF7\u8F93\u5165\u5BC6\u7801"}],password2:[{required:!0,message:"\u8BF7\u518D\u6B21\u8F93\u5165\u5BC6\u7801"},{validator:(i,o,a)=>{o!==this.form.password?a(new Error("\u4E24\u6B21\u8F93\u5165\u5BC6\u7801\u4E0D\u4E00\u81F4")):a()}}],agree:[{validator:(i,o,a)=>{o?a():a(new Error("\u8BF7\u9605\u8BFB\u5E76\u540C\u610F\u534F\u8BAE"))}}],db_name:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u540D\u79F0"}],db_host:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u5730\u5740"}],db_port:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u7AEF\u53E3"}],db_user:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u7528\u6237"}],db_pwd:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u5BC6\u7801"}],db_type:[{required:!0,message:"\u8BF7\u9009\u62E9\u6570\u636E\u5E93\u7C7B\u578B"}],cache_name:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u540D\u79F0"}],cache_host:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u5730\u5740"}],cache_port:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u7AEF\u53E3"}],cache_user:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u7528\u6237"}],cache_pwd:[{required:!0,message:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u5BC6\u7801"}],cache_type:[{required:!0,message:"\u8BF7\u9009\u62E9\u7F13\u5B58\u7C7B\u578B"}]}}},mounted(){},methods:{pre(){this.stepActive-=1},next(){const i=`stepForm_${this.stepActive}`;this.$refs[i].validate(o=>{if(o){if(this.form.db_type=="sqlite"&&this.stepActive==2||this.form.cache_type=="local"&&this.stepActive==3)return this.showWarning=!0,this.checkDBCache(),!0;this.stepActive+=1}else return!1})},async save(){this.isloading=!0;const i=`stepForm_${this.stepActive}`;this.$refs[i].validate(a=>{if(!a)return!1});var o=await this.$API.install.install.post(this.form);if(this.isloading=!1,o.errno==0)this.stepActive+=1;else return!1},checkDBCache(){this.stepActive==2?this.db_cache="Sqlite\u6570\u636E\u5E93":this.stepActive==3&&(this.db_cache="\u672C\u5730\u7F13\u5B58")},goMscLogin(){this.$CONFIG.APP_INIT=!1,this.$router.replace({path:"/"})},goAppLogin(){location.replace(location.protocol+"//"+location.hostname+":"+this.form.port)}}},X=h("div",{class:"el-form-item-msg"},"\u8BE5\u7AEF\u53E3\u4F5C\u4E3A\u5E94\u7528\u7AEF\u53E3\uFF0C\u975E\u7BA1\u7406\u7AEF\u7AEF\u53E3\u53F7\u3002",-1),Y=h("div",{class:"el-form-item-msg"},"\u767B\u5F55\u8D26\u53F7\u5C06\u4F5C\u4E3A\u767B\u5F55\u65F6\u7684\u552F\u4E00\u51ED\u8BC1",-1),$=h("div",{class:"el-form-item-msg"},"\u9ED8\u8BA4\u5BC6\u7801root123\uFF0C\u8BF7\u4FEE\u6539\u5BC6\u7801\u5E76\u59A5\u5584\u4FDD\u7BA1",-1),ee=m("\u5DF2\u9605\u8BFB\u5E76\u540C\u610F"),oe=m("Sqlite"),le=m("Postgres"),se=m("Local"),te=h("div",{class:"el-form-item-msg"},"\u8BE5\u5730\u5740\u4F5C\u4E3A\u65E5\u5FD7\uFF0C\u7F13\u5B58\uFF0C\u6570\u636E\u5E93\u7B49\u6570\u636E\u5B58\u50A8\u8DEF\u5F84\uFF0C\u9ED8\u8BA4\u5728\u7A0B\u5E8F\u542F\u52A8\u76EE\u5F55\u4E0B\u3002\u5982\u9700\u66F4\u6539\uFF0C\u8BF7\u624B\u52A8\u586B\u5199\u6570\u636E\u5B58\u50A8\u8DEF\u5F84",-1),re={key:5},ue=m("\u540E\u53F0\u767B\u5F55"),ne=m("\u5E94\u7528\u767B\u5F55"),pe=m("\u4E0A\u4E00\u6B65"),ie=m("\u4E0B\u4E00\u6B65"),de=m("\u63D0\u4EA4"),me=m("\u53D6\u6D88"),ae=m("\u6211\u5DF2\u9605\u8BFB\u5E76\u540C\u610F"),_e={style:{"font-size":"16px",color:"brown"}},fe=m("\u53D6\u6D88"),ce=m("\u786E\u5B9A");function he(i,o,a,w,e,f){const c=F,V=P,d=N,u=I,g=W,q=S,U=L,b=z,v=R,_=G,x=M,B=k("agreePage"),y=T,E=k("common-page");return r(),n(E,{title:"\u9879\u76EE\u521D\u59CB\u5316"},{default:t(()=>[l(V,{active:e.stepActive,simple:"","finish-status":"success"},{default:t(()=>[l(c,{title:"\u670D\u52A1\u914D\u7F6E"}),l(c,{title:"\u7528\u6237\u914D\u7F6E"}),l(c,{title:"\u6570\u636E\u5E93\u914D\u7F6E"}),l(c,{title:"\u7F13\u5B58\u914D\u7F6E"}),l(c,{title:"\u6570\u636E\u914D\u7F6E"}),l(c,{title:"\u5B8C\u6210\u6CE8\u518C"})]),_:1},8,["active"]),e.stepActive==0?(r(),n(g,{key:0,ref:"stepForm_0",model:e.form,rules:e.rules,"label-width":120},{default:t(()=>[l(u,{label:"\u7AEF\u53E3\u53F7",prop:"port"},{default:t(()=>[l(d,{modelValue:e.form.port,"onUpdate:modelValue":o[0]||(o[0]=s=>e.form.port=s),placeholder:"\u8BF7\u8F93\u5165\u670D\u52A1\u5668\u7AEF\u53E3\u53F7"},null,8,["modelValue"]),X]),_:1})]),_:1},8,["model","rules"])):p("",!0),e.stepActive==1?(r(),n(g,{key:1,ref:"stepForm_1",model:e.form,rules:e.rules,"label-width":120},{default:t(()=>[l(u,{label:"\u767B\u5F55\u8D26\u53F7",prop:"user"},{default:t(()=>[l(d,{modelValue:e.form.user,"onUpdate:modelValue":o[1]||(o[1]=s=>e.form.user=s),placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u8D26\u53F7"},null,8,["modelValue"]),Y]),_:1}),l(u,{label:"\u767B\u5F55\u5BC6\u7801",prop:"password"},{default:t(()=>[l(d,{modelValue:e.form.password,"onUpdate:modelValue":o[2]||(o[2]=s=>e.form.password=s),type:"password","show-password":"",placeholder:"\u8BF7\u8F93\u5165\u767B\u5F55\u5BC6\u7801"},null,8,["modelValue"]),l(q,{modelValue:e.form.password,"onUpdate:modelValue":o[3]||(o[3]=s=>e.form.password=s)},null,8,["modelValue"]),$]),_:1}),l(u,{label:"\u786E\u8BA4\u5BC6\u7801",prop:"password2"},{default:t(()=>[l(d,{modelValue:e.form.password2,"onUpdate:modelValue":o[4]||(o[4]=s=>e.form.password2=s),type:"password","show-password":"",placeholder:"\u8BF7\u518D\u4E00\u6B21\u8F93\u5165\u767B\u5F55\u5BC6\u7801"},null,8,["modelValue"])]),_:1}),l(u,{label:"",prop:"agree"},{default:t(()=>[l(U,{modelValue:e.form.agree,"onUpdate:modelValue":o[5]||(o[5]=s=>e.form.agree=s),label:""},{default:t(()=>[ee]),_:1},8,["modelValue"]),h("span",{class:"link",onClick:o[6]||(o[6]=s=>e.showAgree=!0)},"\u300A\u5E73\u53F0\u670D\u52A1\u534F\u8BAE\u300B")]),_:1})]),_:1},8,["model","rules"])):p("",!0),e.stepActive==2?(r(),n(g,{key:2,ref:"stepForm_2",model:e.form,rules:e.rules,"label-width":120},{default:t(()=>[l(u,{label:"\u6570\u636E\u5E93\u540D\u79F0",prop:"db_name"},{default:t(()=>[l(d,{modelValue:e.form.db_name,"onUpdate:modelValue":o[7]||(o[7]=s=>e.form.db_name=s),placeholder:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e.isShowDB?(r(),n(u,{key:0,label:"\u6570\u636E\u5E93\u5730\u5740",prop:"db_host"},{default:t(()=>[l(d,{modelValue:e.form.db_host,"onUpdate:modelValue":o[8]||(o[8]=s=>e.form.db_host=s),placeholder:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u5730\u5740"},null,8,["modelValue"])]),_:1})):p("",!0),e.isShowDB?(r(),n(u,{key:1,label:"\u6570\u636E\u5E93\u7AEF\u53E3",prop:"db_port"},{default:t(()=>[l(d,{modelValue:e.form.db_port,"onUpdate:modelValue":o[9]||(o[9]=s=>e.form.db_port=s),placeholder:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u7AEF\u53E3"},null,8,["modelValue"])]),_:1})):p("",!0),e.isShowDB?(r(),n(u,{key:2,label:"\u6570\u636E\u5E93\u7528\u6237",prop:"db_user"},{default:t(()=>[l(d,{modelValue:e.form.db_user,"onUpdate:modelValue":o[10]||(o[10]=s=>e.form.db_user=s),placeholder:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u7528\u6237"},null,8,["modelValue"])]),_:1})):p("",!0),e.isShowDB?(r(),n(u,{key:3,label:"\u6570\u636E\u5E93\u5BC6\u7801",prop:"db_pwd"},{default:t(()=>[l(d,{modelValue:e.form.db_pwd,"onUpdate:modelValue":o[11]||(o[11]=s=>e.form.db_pwd=s),placeholder:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u5BC6\u7801"},null,8,["modelValue"])]),_:1})):p("",!0),l(u,{label:"\u6570\u636E\u5E93\u7C7B\u578B",prop:"db_type"},{default:t(()=>[l(v,{modelValue:e.form.db_type,"onUpdate:modelValue":o[14]||(o[14]=s=>e.form.db_type=s)},{default:t(()=>[l(b,{label:"sqlite",onClick:o[12]||(o[12]=s=>e.isShowDB=!1)},{default:t(()=>[oe]),_:1}),l(b,{label:"postgres",onClick:o[13]||(o[13]=s=>e.isShowDB=!0)},{default:t(()=>[le]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])):p("",!0),e.stepActive==3?(r(),n(g,{key:3,ref:"stepForm_3",model:e.form,rules:e.rules,"label-width":120},{default:t(()=>[l(u,{label:"\u7F13\u5B58\u540D\u79F0",prop:"cache_name"},{default:t(()=>[l(d,{modelValue:e.form.cache_name,"onUpdate:modelValue":o[15]||(o[15]=s=>e.form.cache_name=s),placeholder:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u540D\u79F0"},null,8,["modelValue"])]),_:1}),e.isShowCache?(r(),n(u,{key:0,label:"\u7F13\u5B58\u5730\u5740",prop:"cache_host"},{default:t(()=>[l(d,{modelValue:e.form.cache_host,"onUpdate:modelValue":o[16]||(o[16]=s=>e.form.cache_host=s),placeholder:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u5730\u5740"},null,8,["modelValue"])]),_:1})):p("",!0),e.isShowCache?(r(),n(u,{key:1,label:"\u7F13\u5B58\u7AEF\u53E3",prop:"cache_port"},{default:t(()=>[l(d,{modelValue:e.form.cache_port,"onUpdate:modelValue":o[17]||(o[17]=s=>e.form.cache_port=s),placeholder:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u7AEF\u53E3"},null,8,["modelValue"])]),_:1})):p("",!0),e.isShowCache?(r(),n(u,{key:2,label:"\u7F13\u5B58\u7528\u6237",prop:"cache_user"},{default:t(()=>[l(d,{modelValue:e.form.cache_user,"onUpdate:modelValue":o[18]||(o[18]=s=>e.form.cache_user=s),placeholder:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u7528\u6237"},null,8,["modelValue"])]),_:1})):p("",!0),e.isShowCache?(r(),n(u,{key:3,label:"\u7F13\u5B58\u5BC6\u7801",prop:"cache_pwd"},{default:t(()=>[l(d,{modelValue:e.form.cache_pwd,"onUpdate:modelValue":o[19]||(o[19]=s=>e.form.cache_pwd=s),placeholder:"\u8BF7\u8F93\u5165\u6570\u636E\u5E93\u5BC6\u7801"},null,8,["modelValue"])]),_:1})):p("",!0),l(u,{label:"\u7F13\u5B58\u7C7B\u578B",prop:"cache_type"},{default:t(()=>[l(v,{modelValue:e.form.cache_type,"onUpdate:modelValue":o[21]||(o[21]=s=>e.form.cache_type=s)},{default:t(()=>[l(b,{label:"local",onClick:o[20]||(o[20]=s=>e.isShowCache=!1)},{default:t(()=>[se]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model","rules"])):p("",!0),e.stepActive==4?(r(),n(g,{key:4,ref:"stepForm_4",model:e.form,rules:e.rules,"label-width":120},{default:t(()=>[l(u,{label:"\u6570\u636E\u5B58\u50A8\u914D\u7F6E",prop:"data_path"},{default:t(()=>[l(d,{modelValue:e.form.data_path,"onUpdate:modelValue":o[22]||(o[22]=s=>e.form.data_path=s),placeholder:"\u8BF7\u8F93\u5165\u6570\u636E\u5B58\u50A8\u4F4D\u7F6E"},null,8,["modelValue"]),te]),_:1})]),_:1},8,["model","rules"])):p("",!0),e.stepActive==5?(r(),C("div",re,[l(x,{icon:"success",title:"\u914D\u7F6E\u6210\u529F","sub-title":"\u53EF\u4EE5\u4F7F\u7528\u8D26\u6237\u5BC6\u7801\u767B\u5F55\u540E\u53F0\u7BA1\u7406\u7CFB\u7EDF"},{extra:t(()=>[l(_,{type:"primary",onClick:f.goMscLogin},{default:t(()=>[ue]),_:1},8,["onClick"]),l(_,{type:"primary",onClick:f.goAppLogin},{default:t(()=>[ne]),_:1},8,["onClick"])]),_:1})])):p("",!0),l(g,{style:{"text-align":"center"}},{default:t(()=>[e.stepActive>0&&e.stepActive<5?(r(),n(_,{key:0,onClick:f.pre},{default:t(()=>[pe]),_:1},8,["onClick"])):p("",!0),e.stepActive<4?(r(),n(_,{key:1,type:"primary",onClick:f.next},{default:t(()=>[ie]),_:1},8,["onClick"])):p("",!0),e.stepActive==4?(r(),n(_,{key:2,type:"primary",loading:e.isloading,onClick:f.save},{default:t(()=>[de]),_:1},8,["loading","onClick"])):p("",!0)]),_:1}),l(y,{modelValue:e.showAgree,"onUpdate:modelValue":o[25]||(o[25]=s=>e.showAgree=s),title:"\u8F6F\u4EF6\u670D\u52A1\u534F\u8BAE",width:800,"destroy-on-close":""},{footer:t(()=>[l(_,{onClick:o[23]||(o[23]=s=>e.showAgree=!1)},{default:t(()=>[me]),_:1}),l(_,{type:"primary",onClick:o[24]||(o[24]=s=>{e.showAgree=!1,e.form.agree=!0})},{default:t(()=>[ae]),_:1})]),default:t(()=>[l(B)]),_:1},8,["modelValue"]),l(y,{modelValue:e.showWarning,"onUpdate:modelValue":o[28]||(o[28]=s=>e.showWarning=s),title:"\u8B66\u544A",width:800,"destroy-on-close":""},{footer:t(()=>[l(_,{onClick:o[26]||(o[26]=s=>e.showWarning=!1)},{default:t(()=>[fe]),_:1}),l(_,{type:"primary",onClick:o[27]||(o[27]=s=>{e.showWarning=!1,e.stepActive+=1})},{default:t(()=>[ce]),_:1})]),default:t(()=>[h("p",_e,"\u8BF7\u6CE8\u610F, \u5F3A\u70C8\u4E0D\u5EFA\u8BAE\u60A8\u5728\u751F\u4EA7\u73AF\u5883\u4F7F\u7528"+O(e.db_cache)+"\u3002",1)]),_:1},8,["modelValue"])]),_:1})}const ye=A(Q,[["render",he]]);export{ye as default};
